<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>試合結果リアルタイム表示</title>
<link href="realtime.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div class="container">
  <div class="content" id="score1">
  </div>
  <div class="content" id="score2">
  </div>
</div>
</body>
<script type="text/javascript" src="jquery-3.0.0.min.js"></script>
<!-- socket.ioのクラインアントライブラリを取得 -->  
<script src="./socket.io/socket.io.js"></script>
<script type="text/javascript">

//接続先の指定  
var url = "http://49.212.133.48:8080/";

//接続
var socket = io.connect(url);   

//サーバから受け取るイベントを作成
socket.on("sendMessageToClient", function (data) {
    if( data.pos == 0 ){
        $.get("http://www.kendo-nagano.com/kendo/result/ajw2016/resultapi.php", { n: 1 });
    } else if( data.pos == 1 ){
        $("#score1").html(data.value);
    } else if( data.pos == 2 ){
        $("#score2").html(data.value);
    }
});
</script>
</html>
